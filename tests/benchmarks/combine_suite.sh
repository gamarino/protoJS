#!/bin/bash
# Combine all benchmark files into a single executable file for protoJS

OUTPUT_FILE="combined_performance_suite.js"

echo "Combining benchmark files..."

cat > "$OUTPUT_FILE" << 'HEADER'
// Combined Performance Test Suite
// Generated by combine_suite.sh
// All benchmark files concatenated for easy execution in protoJS

HEADER

echo "// ===== benchmark_runner.js =====" >> "$OUTPUT_FILE"
cat benchmark_runner.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// ===== basic_types.js =====" >> "$OUTPUT_FILE"
cat basic_types.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// ===== collections.js =====" >> "$OUTPUT_FILE"
cat collections.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// ===== overall_performance.js =====" >> "$OUTPUT_FILE"
cat overall_performance.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// ===== compare_engines.js =====" >> "$OUTPUT_FILE"
cat compare_engines.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// ===== report_generator.js =====" >> "$OUTPUT_FILE"
cat report_generator.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// ===== run_all.js =====" >> "$OUTPUT_FILE"
cat run_all.js >> "$OUTPUT_FILE"
echo "" >> "$OUTPUT_FILE"

echo "// Execute benchmarks" >> "$OUTPUT_FILE"
echo "runAllBenchmarks();" >> "$OUTPUT_FILE"

echo "Combined suite created: $OUTPUT_FILE"
echo "Run with: ./build/protojs tests/benchmarks/$OUTPUT_FILE"
